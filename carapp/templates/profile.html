<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CarBnR - Profile</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="icon" href="../static/images/thumb.png">
  <link rel="stylesheet" href="../static/styles/profile.css">
</head>
<body>
<div class="container my-5 p-4 rounded shadow-lg" style="background: #f8f9fa; border: 1px solid #dee2e6;">
<div class="row align-items-center mb-3 profile-section">
    <!-- Profile Picture & Basic Info -->
    <div class="col-md-3 text-center">
        <div class="profile-pic-wrapper">
            <img src="../static/images/profile_pic.jpg" alt="Profile Picture" class="profile-pic img-fluid rounded-circle skeleton">
            <span class="status-dot skeleton-dot"></span>
        </div>
        <h3 class="user-name mt-3 skeleton-text" id="user-name">Loading...</h3>
        <p class="region text-muted skeleton-text" id="region">Loading region...</p>
    </div>

    <!-- Account Details & Actions -->
    <div class="col-md-9">
        <div class="account-details-card shadow" id="account-details">
            <h4 class="account-title skeleton-text">Account Details</h4>
            <div class="detail-item skeleton-text"><strong>Email:</strong> Loading...</div>
            <div class="detail-item skeleton-text"><strong>Phone:</strong> Loading...</div>
            <div class="detail-item skeleton-text"><strong>Member Since:</strong> Loading...</div>
            <div class="detail-item skeleton-text"><strong>Total Bookings:</strong> Loading...</div>
        </div>
    </div>
</div>
<!-- Navigation Tabs -->
   <ul class="nav nav-tabs profile-nav mb-4" id="categoryOne">
      <li class="nav-item">
         <a class="nav-link" data-toggle="tab" href="#upcoming-bookings">My Upcoming Bookings</a>
      </li>
      <li class="nav-item">
         <a class="nav-link" data-toggle="tab" href="#ongoing-bookings">My Ongoing Bookings</a>
      </li>
      <li class="nav-item">
         <a class="nav-link" data-toggle="tab" href="#past-bookings">My Past Booking</a>
      </li>
      <li class="nav-item">
         <a class="nav-link" data-toggle="tab" href="#settings">Account Settings</a>
      </li>
   </ul>
   <ul class="nav nav-tabs profile-nav mb-4" id="categoryTwo"  style="display: none;">
      <li class="nav-item">
         <a class="nav-link" data-toggle="tab" href="#location-upcoming-bookings">Location Upcoming Bookings</a>
      </li>
      <li class="nav-item">
         <a class="nav-link" data-toggle="tab" href="#location-ongoing-bookings">Location Ongoing Bookings</a>
      </li>
      <li class="nav-item">
         <a class="nav-link" data-toggle="tab" href="#location-past-bookings">Location Past Booking</a>
      </li>
      <li class="nav-item">
         <a class="nav-link" data-toggle="tab" href="#manage-cars">Manage Cars</a>
      </li>
   </ul>

   <!-- Tab Content -->
   <div class="tab-content">
      <!-- Upcoming Bookings Tab -->
      <div class="tab-pane fade" id="upcoming-bookings">
        <div class="upcoming-bookingMessage">
        <h3>Upcoming Bookings</h3>
        <p>Here's a list of your location upcoming bookings. Manage or cancel them if needed.</p>
        </div>
        <div class="upcoming-bookings-spinner"></div>
        <div class="upcoming-bookings card mb-4 shadow-lg">
            <!-- Upcoming Bookings to be loaded here -->
        </div>
        <div class="upcoming-bookings-placeholder"></div>
        <button id="load-more-upcoming">Load More Upcoming Bookings</button>
      </div>


      <!-- Ongoing Bookings Tab -->
      <div class="tab-pane fade" id="ongoing-bookings">
        <div class="ongoing-bookingMessage">
        <h3>Ongoing Bookings</h3>
        <p>Here's a list of your ongoing bookings.</p>
        </div>
        <div class="ongoing-bookings-spinner"></div>
        <div class="ongoing-bookings card mb-4 shadow-lg">
            <!-- Ongoing Bookings to be loaded here -->
        </div>
        <div class="ongoing-bookings-placeholder"></div>
        <button id="load-more-ongoing">Load More Ongoing Bookings</button>
      </div>

      <!-- Past Booking Tab -->
      <div class="tab-pane fade" id="past-bookings">
        <div class="past-bookingMessage">
        <h3>Past Booking</h3>
        <p>View the details of past bookings.</p>
        </div>
        <div class="past-bookings-spinner"></div>
        <div class="past-bookings card mb-4 shadow-lg">
            <!-- Past Bookings to be loaded here -->
        </div>
        <div class="past-bookings-placeholder"></div>
        <button id="load-more-past">Load More Past Bookings</button>
      </div>

      <!-- Manage Cars Tab -->
      <div class="tab-pane fade" id="manage-cars">
        <div class="manage-cars-message">
         <h3>Manage Cars</h3>
         <p>View and edit cars youâ€™ve added to CarBnR.</p>
         <!-- Location Dropdown -->
         <div class="mb-4">
           <div id="dropdown-container" class="d-flex align-items-center gap-2"></div>
         </div>

         <!-- Car Cards Section -->
         <div id="car-list" class="row">
           <!-- Cars will be dynamically injected here -->
         </div>
        </div>
      </div>

      <!-- Location Upcoming Bookings Tab -->
      <div class="tab-pane fade" id="location-upcoming-bookings">
        <div class="location-upcoming-bookingMessage">
        <h3>Location Upcoming Bookings</h3>
        <p>Here's a list of your location upcoming bookings.</p>
        </div>
        <div class="location-upcoming-bookings-spinner"></div>
        <div class="location-upcoming-bookings card mb-4 shadow-lg">
            <!-- Location Upcoming Bookings to be loaded here -->
        </div>
        <div class="location-upcoming-bookings-placeholder"></div>
        <button id="load-more-location-upcoming">Load More Location Upcoming Bookings</button>
      </div>

      <!-- Location Ongoing Bookings Tab -->
      <div class="tab-pane fade" id="location-ongoing-bookings">
        <div class="location-ongoing-bookingMessage">
        <h3>Location Ongoing Bookings</h3>
        <p>Here's a list of your location ongoing bookings.</p>
        </div>
        <div class="location-ongoing-bookings-spinner"></div>
        <div class="location-ongoing-bookings card mb-4 shadow-lg">
            <!-- Location Ongoing Bookings to be loaded here -->
        </div>
        <div class="location-ongoing-bookings-placeholder"></div>
        <button id="load-more-location-ongoing">Load More Location Ongoing Bookings</button>
      </div>

      <!-- Location Past Bookings Tab -->
      <div class="tab-pane fade" id="location-past-bookings">
        <div class="location-past-bookingMessage">
        <h3>Location Past Bookings</h3>
        <p>Here's a list of your location past bookings.</p>
        </div>
        <div class="location-past-bookings-spinner"></div>
        <div class="location-past-bookings card mb-4 shadow-lg">
            <!-- Location Past Bookings to be loaded here -->
        </div>
        <div class="location-past-bookings-placeholder"></div>
        <button id="load-more-location-past">Load More Location Past Bookings</button>
      </div>

      <!-- Account Settings Tab -->
      <div class="tab-pane fade" id="settings">
         <h3>Account Settings</h3>
         <p>Update your personal information and preferences.</p>
         <button class="btn btn-outline-primary btn-block mb-2" id="edit-profile"><i class="fas fa-edit"></i> Edit Profile</button>
         <button class="btn btn-outline-danger btn-block" id="delete-account"><i class="fas fa-trash-alt"></i> Delete Account</button>
      </div>
   </div>
</div>
<!-- Modal for Modifying Booking -->
<div class="modal fade" id="modifyBookingModal" tabindex="-1" aria-labelledby="modifyBookingModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modifyBookingModalLabel">Modify Booking</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="modifyBookingForm">
          <div class="form-group">
            <label for="pickupDate">Pickup Date</label>
            <input type="date" id="pickupDate" class="form-control" required>
          </div>
          <div class="form-group">
            <label for="dateTime">Pickup Time</label>
            <input type="time" id="dateTime" class="form-control" required>
          </div>
          <div class="form-group">
            <label for="returnDate">Return Date</label>
            <input type="date" id="returnDate" class="form-control" required>
          </div>
          <div id="modificationWarning" class="text-danger d-none">
            <p>Modification not allowed within 2 day of the pickup date.</p>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="saveBookingChanges">Save Changes</button>
      </div>
    </div>
  </div>
</div>
<!-- Update User Modal -->
<div class="modal fade" id="updateUserModal" tabindex="-1" role="dialog" aria-labelledby="updateUserModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateUserModalLabel">Update User Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="updateUserForm">
                    <div class="form-group">
                        <label for="first_name">First Name:</label>
                        <input type="text" class="form-control" id="first_name" placeholder="Enter first name">
                    </div>
                    <div class="form-group">
                        <label for="last_name">Last Name:</label>
                        <input type="text" class="form-control" id="last_name" placeholder="Enter last name">
                    </div>
                    <div class="form-group">
                        <label for="region">Region:</label>
                        <input type="text" class="form-control" id="region" placeholder="Enter region">
                    </div>
                    <div class="form-group">
                        <label for="phone_number">Phone Number:</label>
                        <input type="text" class="form-control" id="phone_number" placeholder="Enter phone number">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveUserChanges">Save Changes</button>
            </div>
        </div>
    </div>
</div>
<!-- Update Car Modal -->
<div class="modal fade" id="updateCarModal" tabindex="-1" role="dialog" aria-labelledby="updateCarModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateCarModalLabel">Update Car Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="updateCarForm">
                    <div class="form-group">
                        <label for="brand">Brand</label>
                        <input type="text" id="brand" class="form-control" placeholder="Enter car brand">
                    </div>
                    <div class="form-group">
                        <label for="model">Model</label>
                        <input type="text" id="model" class="form-control" placeholder="Enter car model">
                    </div>
                    <div class="form-group">
                        <label for="year">Year</label>
                        <input type="number" id="year" class="form-control" placeholder="Enter manufacturing year">
                    </div>
                    <div class="form-group">
                        <label for="price_by_day">Price per Day</label>
                        <input type="number" id="price_by_day" class="form-control" placeholder="Enter price per day">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" id="saveCarChanges" class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>
</div>
<!-- Update Location Modal -->
<div class="modal fade" id="updateLocationModal" tabindex="-1" role="dialog" aria-labelledby="updateLocationModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateLocationModalLabel">Update Location Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="updateLocationForm">
                    <div class="form-group">
                        <label for="locationName">Location Name</label>
                        <input type="text" id="locationName" class="form-control" placeholder="Enter location name">
                    </div>
                    <div class="form-group">
                        <label for="locationAddress">Location Address</label>
                        <input type="text" id="locationAddress" class="form-control" placeholder="Enter location address">
                    </div>
                    <div class="form-group">
                        <label for="locationPhone">Phone Number</label>
                        <input type="tel" id="locationPhone" class="form-control" placeholder="Enter phone number">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" id="saveLocationChanges" class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>
</div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="../static/scripts/stateAbbreviations.js"></script>
  <script src="../static/scripts/status-parameters.js"></script>
  <script src="../static/scripts/getBookingDetails.js"></script>
  <script src="../static/scripts/profile.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
